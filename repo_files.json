{
  "main.py": {
    "summary": "This file is the main entry point for an application that initializes and runs an instance of `OperonUI`, a user interface component, handling graceful shutdown on keyboard interrupts.",
    "functions": [],
    "classes": [],
    "imports": [
      "OperonUI",
      "sys",
      "tui.app"
    ]
  },
  "requirements.txt": {
    "summary": "This file lists the Python packages and their versions required for a project.",
    "functions": [],
    "classes": [],
    "imports": []
  },
  "test.js": {
    "summary": "This file contains a function named `printHello` that logs the string \"hello Operon Multilingual\" to the console.",
    "functions": [
      {
        "name": "printHello",
        "start": 1,
        "end": 3
      }
    ],
    "classes": [],
    "imports": []
  },
  "readme.md": {
    "summary": "This file is a README for a local-first autonomous coding agent named Operon, which modifies repository functions using deterministic loop control, slice-based rewriting, and human-approved commits.",
    "functions": [],
    "classes": [],
    "imports": [
      "in"
    ]
  },
  "repo_tree.json": {
    "summary": "This file is a JSON representation of the directory structure of a software project, listing all files and subdirectories.",
    "functions": [],
    "classes": [],
    "imports": []
  },
  "repo_files.json": {
    "summary": "This file describes the structure and contents of a software repository, including Python scripts with functions and classes for various tasks like running tests, applying patches, searching repositories, and building a brain for the repo using an LLM.",
    "functions": [],
    "classes": [],
    "imports": []
  },
  "tools/function_locator.py": {
    "summary": "This file defines a function `find_function` that searches for a function or class by name within a repository, returning its file path and line range if found.",
    "functions": [
      {
        "name": "find_function",
        "start": 5,
        "end": 39
      }
    ],
    "classes": [],
    "imports": [
      "Path",
      "json",
      "pathlib"
    ]
  },
  "tools/universal_parser.py": {
    "summary": "This file provides functions to parse, check syntax, and extract symbols (functions and classes) from code in various programming languages using the Tree-sitter library.",
    "functions": [
      {
        "name": "get_parser",
        "start": 18,
        "end": 25
      },
      {
        "name": "check_syntax",
        "start": 28,
        "end": 35
      },
      {
        "name": "extract_symbols",
        "start": 38,
        "end": 97
      },
      {
        "name": "get_node_name",
        "start": 65,
        "end": 76
      },
      {
        "name": "walk",
        "start": 78,
        "end": 94
      }
    ],
    "classes": [],
    "imports": [
      "Language",
      "Path",
      "pathlib",
      "tree_sitter",
      "tree_sitter_java",
      "tree_sitter_javascript",
      "tree_sitter_python"
    ]
  },
  "tools/fs_tools.py": {
    "summary": "This file provides functions to read from and write to files in a repository, handling errors and ensuring proper file modes.",
    "functions": [
      {
        "name": "read_file",
        "start": 5,
        "end": 11
      },
      {
        "name": "write_file",
        "start": 13,
        "end": 39
      }
    ],
    "classes": [],
    "imports": [
      "Dict",
      "Path",
      "pathlib",
      "typing"
    ]
  },
  "tools/git_tools.py": {
    "summary": "This file contains functions to interact with Git, including running Git commands, creating branches, and committing changes with automated messages.",
    "functions": [
      {
        "name": "_run",
        "start": 6,
        "end": 18
      },
      {
        "name": "_current_branch",
        "start": 21,
        "end": 23
      },
      {
        "name": "_slugify",
        "start": 26,
        "end": 30
      },
      {
        "name": "smart_commit_pipeline",
        "start": 33,
        "end": 51
      }
    ],
    "classes": [],
    "imports": [
      "agent.logger",
      "log",
      "re",
      "subprocess"
    ]
  },
  "tools/diff_engine.py": {
    "summary": "This file contains functions to parse search and replace blocks from text, normalize lines for comparison, and apply patches to original text by replacing matching blocks while handling indentation and new file creation.",
    "functions": [
      {
        "name": "parse_search_replace",
        "start": 3,
        "end": 10
      },
      {
        "name": "_normalize_lines",
        "start": 12,
        "end": 14
      },
      {
        "name": "apply_patch",
        "start": 16,
        "end": 78
      }
    ],
    "classes": [],
    "imports": [
      "re"
    ]
  },
  "tools/build_brain.py": {
    "summary": "This file initializes a repository brain by calling a function from another module.",
    "functions": [],
    "classes": [],
    "imports": [
      "agent.llm",
      "build_repo_brain",
      "call_llm",
      "tools.repo_brain"
    ]
  },
  "tools/repo_search.py": {
    "summary": "This file defines a function `search_repo` that searches a repository for files containing specific keywords and returns the top 5 files with the highest scores.",
    "functions": [
      {
        "name": "search_repo",
        "start": 4,
        "end": 39
      }
    ],
    "classes": [],
    "imports": [
      "Path",
      "json",
      "pathlib"
    ]
  },
  "tools/repo_brain.py": {
    "summary": "Provides functions build_tree, extract_imports_regex, build_repo_brain and classes .",
    "functions": [
      {
        "name": "build_tree",
        "start": 12,
        "end": 21
      },
      {
        "name": "extract_imports_regex",
        "start": 24,
        "end": 34
      },
      {
        "name": "build_repo_brain",
        "start": 37,
        "end": 116
      }
    ],
    "classes": [],
    "imports": [
      "Path",
      "detection.",
      "extract_symbols",
      "json",
      "pathlib",
      "re",
      "tools.universal_parser"
    ]
  },
  "tools/code_slice.py": {
    "summary": "This file defines a function `load_function_slice` that loads and returns the lines of code surrounding a specified function or class within a repository.",
    "functions": [
      {
        "name": "load_function_slice",
        "start": 5,
        "end": 47
      }
    ],
    "classes": [],
    "imports": [
      "Path",
      "find_function",
      "pathlib",
      "tools.function_locator"
    ]
  },
  "agent/tool_jail.py": {
    "summary": "This file defines a set of allowed actions that an agent can perform, including searching a repository, reading a file, rewriting a function, and finishing with a message.",
    "functions": [],
    "classes": [],
    "imports": []
  },
  "agent/decide.py": {
    "summary": "This file contains a function `decide_next_action` that uses a language model to determine the next action to take based on the current state, including action history, observations, and a goal. It outputs a JSON object with a thought process and a tool to be executed.",
    "functions": [
      {
        "name": "decide_next_action",
        "start": 6,
        "end": 70
      }
    ],
    "classes": [],
    "imports": [
      "agent.llm",
      "agent.logger",
      "call_llm",
      "json",
      "log",
      "re"
    ]
  },
  "agent/planner.py": {
    "summary": "This file defines a function `make_plan` that generates a list of high-level steps to achieve a given goal using a language model.",
    "functions": [
      {
        "name": "make_plan",
        "start": 4,
        "end": 36
      }
    ],
    "classes": [],
    "imports": [
      "agent.llm",
      "call_llm"
    ]
  },
  "agent/approval.py": {
    "summary": "This file contains a function `ask_user_approval` that pauses a worker thread, displays an approval dialogue, and waits for user input to either approve or reject a code change.",
    "functions": [
      {
        "name": "ask_user_approval",
        "start": 3,
        "end": 28
      }
    ],
    "classes": [],
    "imports": [
      "agent.logger"
    ]
  },
  "agent/logger.py": {
    "summary": "This file sets up a logging system that writes logs to both a file and a user interface, with different formatting for each output.",
    "functions": [
      {
        "name": "emit",
        "start": 11,
        "end": 16
      },
      {
        "name": "setup_logger",
        "start": 18,
        "end": 34
      }
    ],
    "classes": [
      {
        "name": "TUILogHandler",
        "start": 10,
        "end": 16
      }
    ],
    "imports": [
      "logging",
      "queue",
      "sys"
    ]
  },
  "agent/loop.py": {
    "summary": "This file contains functions for detecting functions from a goal, rewriting functions based on a given state and code, and running an agent to manage the code editing process.",
    "functions": [
      {
        "name": "_detect_function_from_goal",
        "start": 19,
        "end": 26
      },
      {
        "name": "_rewrite_function",
        "start": 28,
        "end": 122
      },
      {
        "name": "run_agent",
        "start": 125,
        "end": 294
      }
    ],
    "classes": [],
    "imports": [
      "ALLOWED_ACTIONS",
      "AND",
      "Path",
      "agent.approval",
      "agent.decide",
      "agent.llm",
      "agent.logger",
      "agent.planner",
      "agent.tool_jail",
      "ask_user_approval",
      "call_llm",
      "check_syntax",
      "decide_next_action",
      "find_function",
      "load_function_slice",
      "log",
      "make_plan",
      "parse_search_replace",
      "pathlib",
      "re",
      "read_file",
      "runtime",
      "search_repo",
      "smart_commit_pipeline",
      "state",
      "time",
      "tools.code_slice",
      "tools.diff_engine",
      "tools.fs_tools",
      "tools.function_locator",
      "tools.git_tools",
      "tools.repo_search",
      "tools.universal_parser"
    ]
  },
  "agent/llm.py": {
    "summary": "This file defines a function `call_llm` that sends a prompt to a local language model server and returns the response.",
    "functions": [
      {
        "name": "call_llm",
        "start": 10,
        "end": 42
      }
    ],
    "classes": [],
    "imports": [
      "agent.logger",
      "json",
      "log",
      "requests"
    ]
  },
  "agent/repo.py": {
    "summary": "This file defines a function `build_repo_summary` that generates a summary of files in a repository, listing up to a specified maximum number of files, excluding files within the `.git` directory.",
    "functions": [
      {
        "name": "build_repo_summary",
        "start": 3,
        "end": 13
      }
    ],
    "classes": [],
    "imports": [
      "Path",
      "pathlib"
    ]
  },
  "tui/app.py": {
    "summary": "This file defines a Textual User Interface (TUI) for an application called Operon, which allows users to interact with an agent for software engineering tasks, including viewing and approving code changes.",
    "functions": [
      {
        "name": "__init__",
        "start": 18,
        "end": 22
      },
      {
        "name": "compose",
        "start": 24,
        "end": 30
      },
      {
        "name": "on_mount",
        "start": 32,
        "end": 40
      },
      {
        "name": "on_button_pressed",
        "start": 42,
        "end": 47
      },
      {
        "name": "compose",
        "start": 66,
        "end": 74
      },
      {
        "name": "on_mount",
        "start": 76,
        "end": 84
      },
      {
        "name": "on_key",
        "start": 86,
        "end": 94
      },
      {
        "name": "on_input_submitted",
        "start": 96,
        "end": 109
      },
      {
        "name": "execute_agent",
        "start": 111,
        "end": 115
      },
      {
        "name": "safe_update_log",
        "start": 117,
        "end": 118
      },
      {
        "name": "_write_to_log",
        "start": 120,
        "end": 121
      },
      {
        "name": "safe_show_diff",
        "start": 123,
        "end": 124
      },
      {
        "name": "_render_approval_ui",
        "start": 126,
        "end": 134
      },
      {
        "name": "resolve_approval",
        "start": 136,
        "end": 150
      }
    ],
    "classes": [
      {
        "name": "DiffApproval",
        "start": 16,
        "end": 47
      },
      {
        "name": "OperonUI",
        "start": 49,
        "end": 150
      }
    ],
    "imports": [
      "AgentState",
      "App",
      "Group",
      "Header",
      "Horizontal",
      "Key",
      "Panel",
      "Syntax",
      "Text",
      "agent.logger",
      "agent.loop",
      "cast",
      "os",
      "rich.console",
      "rich.panel",
      "rich.syntax",
      "rich.text",
      "run_agent",
      "runtime.state",
      "sys",
      "textual.app",
      "textual.containers",
      "textual.events",
      "textual.widgets",
      "typing"
    ]
  },
  "runtime/state.py": {
    "summary": "This file defines a data class `AgentState` used to store the state of an agent, including its goal, repository root, plan, files read and modified, last action, action log, observations, errors, step count, and done status.",
    "functions": [],
    "classes": [
      {
        "name": "AgentState",
        "start": 5,
        "end": 20
      }
    ],
    "imports": [
      "List",
      "dataclass",
      "dataclasses",
      "typing"
    ]
  }
}